<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Detalhes da Receita</title>

  <link rel="stylesheet" href="assets/css/styles.css"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body>
  <!-- Cabeçalho -->
  <header class="bg-dark text-white py-3">
    <div class="container d-flex justify-content-between align-items-center">
      <h1 class="h4 mb-0">Detalhes da Receita</h1>
      <a href="index.html" class="btn btn-outline-light btn-sm">Voltar</a>
    </div>
  </header>

  <!-- Aqui o JS vai montar -->
  <main class="container my-4" id="detalhe-container">
    <!-- conteúdo vem via JS -->
  </main>

  <footer class="bg-dark text-white text-center py-3 mt-5">
    <small>&copy; 2025 — Projeto acadêmico (Lucas Silva Borges)</small>
  </footer>

  <!-- seu app.js antigo que monta os detalhes está aqui -->
  <script src="assets/js/app.js"></script>

  <!-- DELETE -->
  <script>
  (function () {
    const API_URL = "http://localhost:3000/receitas";
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    // esperamos o app.js terminar de montar
    document.addEventListener("DOMContentLoaded", function () {
      const container = document.getElementById("detalhe-container");
      if (!container) return;

      // cria o botão de excluir embaixo
      if (id) {
        const btn = document.createElement("button");
        btn.id = "btn-excluir";
        btn.textContent = "Excluir receita";
        btn.className = "btn btn-danger mt-4";
        container.appendChild(btn);

        btn.addEventListener("click", function () {
          if (!confirm("Tem certeza que deseja excluir?")) return;

          fetch(API_URL + "/" + id, {
            method: "DELETE"
          }).then(function (resp) {
            console.log("DELETE", resp.status);
            // não redireciona pra você poder printar
          });
        });
      }
    });
  })();
  </script>
</body>
</html>
